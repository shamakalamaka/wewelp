<!-- –°–∏—Å—Ç–µ–º–∞ –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –¥–ª—è —Ü–µ–ª–µ–π -->
<div class="modal-overlay" id="goalImageModal">
    <div class="modal image-selector-modal">
        <div class="modal-header">
            <h3 class="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç–∏–Ω–∫—É –¥–ª—è —Ü–µ–ª–∏</h3>
            <button class="modal-close" onclick="closeImageSelector()">√ó</button>
        </div>
        
        <div class="image-selector-tabs">
            <button class="image-tab active" onclick="switchImageTab('default')">
                üé® –ì–æ—Ç–æ–≤—ã–µ –∏–∫–æ–Ω–∫–∏
            </button>
            <button class="image-tab" onclick="switchImageTab('upload')">
                üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ—é
            </button>
        </div>
        
        <!-- –ì–æ—Ç–æ–≤—ã–µ –∏–∫–æ–Ω–∫–∏ -->
        <div class="image-tab-content active" id="defaultImagesTab">
            <div class="default-images-grid">
                <!-- –î–æ–º –∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å -->
                <div class="image-option" data-icon="üè†" onclick="selectDefaultImage('üè†')">
                    <div class="image-preview">üè†</div>
                    <div class="image-label">–î–æ–º</div>
                </div>
                <div class="image-option" data-icon="üè¢" onclick="selectDefaultImage('üè¢')">
                    <div class="image-preview">üè¢</div>
                    <div class="image-label">–û—Ñ–∏—Å</div>
                </div>
                <div class="image-option" data-icon="üè°" onclick="selectDefaultImage('üè°')">
                    <div class="image-preview">üè°</div>
                    <div class="image-label">–ö–æ—Ç—Ç–µ–¥–∂</div>
                </div>
                
                <!-- –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç -->
                <div class="image-option" data-icon="üöó" onclick="selectDefaultImage('üöó')">
                    <div class="image-preview">üöó</div>
                    <div class="image-label">–ú–∞—à–∏–Ω–∞</div>
                </div>
                <div class="image-option" data-icon="üöô" onclick="selectDefaultImage('üöô')">
                    <div class="image-preview">üöô</div>
                    <div class="image-label">–í–Ω–µ–¥–æ—Ä–æ–∂–Ω–∏–∫</div>
                </div>
                <div class="image-option" data-icon="üèçÔ∏è" onclick="selectDefaultImage('üèçÔ∏è')">
                    <div class="image-preview">üèçÔ∏è</div>
                    <div class="image-label">–ú–æ—Ç–æ—Ü–∏–∫–ª</div>
                </div>
                
                <!-- –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ -->
                <div class="image-option" data-icon="üéì" onclick="selectDefaultImage('üéì')">
                    <div class="image-preview">üéì</div>
                    <div class="image-label">–î–∏–ø–ª–æ–º</div>
                </div>
                <div class="image-option" data-icon="üìö" onclick="selectDefaultImage('üìö')">
                    <div class="image-preview">üìö</div>
                    <div class="image-label">–ö–Ω–∏–≥–∏</div>
                </div>
                <div class="image-option" data-icon="üåê" onclick="selectDefaultImage('üåê')">
                    <div class="image-preview">üåê</div>
                    <div class="image-label">–Ø–∑—ã–∫–∏</div>
                </div>
                
                <!-- –ó–¥–æ—Ä–æ–≤—å–µ –∏ —Å–ø–æ—Ä—Ç -->
                <div class="image-option" data-icon="üí™" onclick="selectDefaultImage('üí™')">
                    <div class="image-preview">üí™</div>
                    <div class="image-label">–°–ø–æ—Ä—Ç</div>
                </div>
                <div class="image-option" data-icon="üèÉ‚Äç‚ôÇÔ∏è" onclick="selectDefaultImage('üèÉ‚Äç‚ôÇÔ∏è')">
                    <div class="image-preview">üèÉ‚Äç‚ôÇÔ∏è</div>
                    <div class="image-label">–ë–µ–≥</div>
                </div>
                <div class="image-option" data-icon="üßò‚Äç‚ôÄÔ∏è" onclick="selectDefaultImage('üßò‚Äç‚ôÄÔ∏è')">
                    <div class="image-preview">üßò‚Äç‚ôÄÔ∏è</div>
                    <div class="image-label">–ô–æ–≥–∞</div>
                </div>
                
                <!-- –ö–∞—Ä—å–µ—Ä–∞ –∏ –±–∏–∑–Ω–µ—Å -->
                <div class="image-option" data-icon="üíº" onclick="selectDefaultImage('üíº')">
                    <div class="image-preview">üíº</div>
                    <div class="image-label">–ö–∞—Ä—å–µ—Ä–∞</div>
                </div>
                <div class="image-option" data-icon="üí∞" onclick="selectDefaultImage('üí∞')">
                    <div class="image-preview">üí∞</div>
                    <div class="image-label">–î–µ–Ω—å–≥–∏</div>
                </div>
                <div class="image-option" data-icon="üöÄ" onclick="selectDefaultImage('üöÄ')">
                    <div class="image-preview">üöÄ</div>
                    <div class="image-label">–°—Ç–∞—Ä—Ç–∞–ø</div>
                </div>
                
                <!-- –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è -->
                <div class="image-option" data-icon="‚úàÔ∏è" onclick="selectDefaultImage('‚úàÔ∏è')">
                    <div class="image-preview">‚úàÔ∏è</div>
                    <div class="image-label">–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è</div>
                </div>
                <div class="image-option" data-icon="üåç" onclick="selectDefaultImage('üåç')">
                    <div class="image-preview">üåç</div>
                    <div class="image-label">–ú–∏—Ä</div>
                </div>
                <div class="image-option" data-icon="üèñÔ∏è" onclick="selectDefaultImage('üèñÔ∏è')">
                    <div class="image-preview">üèñÔ∏è</div>
                    <div class="image-label">–û—Ç–ø—É—Å–∫</div>
                </div>
                
                <!-- –¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ -->
                <div class="image-option" data-icon="üé®" onclick="selectDefaultImage('üé®')">
                    <div class="image-preview">üé®</div>
                    <div class="image-label">–ò—Å–∫—É—Å—Å—Ç–≤–æ</div>
                </div>
                <div class="image-option" data-icon="üéµ" onclick="selectDefaultImage('üéµ')">
                    <div class="image-preview">üéµ</div>
                    <div class="image-label">–ú—É–∑—ã–∫–∞</div>
                </div>
                <div class="image-option" data-icon="üì∏" onclick="selectDefaultImage('üì∏')">
                    <div class="image-preview">üì∏</div>
                    <div class="image-label">–§–æ—Ç–æ</div>
                </div>
                
                <!-- –û—Ç–Ω–æ—à–µ–Ω–∏—è -->
                <div class="image-option" data-icon="‚ù§Ô∏è" onclick="selectDefaultImage('‚ù§Ô∏è')">
                    <div class="image-preview">‚ù§Ô∏è</div>
                    <div class="image-label">–õ—é–±–æ–≤—å</div>
                </div>
                <div class="image-option" data-icon="üë®‚Äçüë©‚Äçüëß‚Äçüë¶" onclick="selectDefaultImage('üë®‚Äçüë©‚Äçüëß‚Äçüë¶')">
                    <div class="image-preview">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                    <div class="image-label">–°–µ–º—å—è</div>
                </div>
                <div class="image-option" data-icon="üë•" onclick="selectDefaultImage('üë•')">
                    <div class="image-preview">üë•</div>
                    <div class="image-label">–î—Ä—É–∑—å—è</div>
                </div>
            </div>
        </div>
        
        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏ -->
        <div class="image-tab-content" id="uploadImagesTab">
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">üìÅ</div>
                <div class="upload-text">
                    <div class="upload-title">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—é–¥–∞</div>
                    <div class="upload-subtitle">–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞</div>
                </div>
                <input type="file" id="imageUpload" accept="image/*" style="display: none;">
            </div>
            
            <div class="upload-preview" id="uploadPreview" style="display: none;">
                <img id="previewImage" alt="Preview">
                <div class="upload-actions">
                    <button class="btn btn-secondary" onclick="clearUpload()">–£–¥–∞–ª–∏—Ç—å</button>
                    <button class="btn btn-primary" onclick="confirmUpload()">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</button>
                </div>
            </div>
            
            <div class="upload-tips">
                <div class="tip-item">üí° –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 200x200 –ø–∏–∫—Å–µ–ª–µ–π</div>
                <div class="tip-item">üìè –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JPG, PNG, GIF</div>
                <div class="tip-item">üì¶ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 2 –ú–ë</div>
            </div>
        </div>
        
        <div class="modal-buttons">
            <button class="btn btn-secondary" onclick="closeImageSelector()">–û—Ç–º–µ–Ω–∞</button>
            <button class="btn btn-primary" id="confirmImageBtn" onclick="confirmImageSelection()" disabled>
                –ü—Ä–∏–º–µ–Ω–∏—Ç—å
            </button>
        </div>
    </div>
</div>

<style>
/* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫ */
.image-selector-modal {
    max-width: 700px;
    width: 95%;
    max-height: 90vh;
}

.image-selector-tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.image-tab {
    padding: 12px 20px;
    background: transparent;
    border: none;
    color: rgba(255, 255, 255, 0.6);
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    border-bottom: 2px solid transparent;
    transition: all 0.3s;
}

.image-tab:hover {
    color: rgba(255, 255, 255, 0.8);
}

.image-tab.active {
    color: #06b6d4;
    border-bottom-color: #06b6d4;
}

.image-tab-content {
    display: none;
}

.image-tab-content.active {
    display: block;
}

.default-images-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
    gap: 12px;
    max-height: 400px;
    overflow-y: auto;
    padding: 10px;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.1);
}

.image-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px 8px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
}

.image-option:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: #06b6d4;
    transform: translateY(-2px);
}

.image-option.selected {
    background: rgba(6, 182, 212, 0.2);
    border-color: #06b6d4;
    box-shadow: 0 0 15px rgba(6, 182, 212, 0.4);
}

.image-preview {
    font-size: 32px;
    margin-bottom: 8px;
    line-height: 1;
}

.image-label {
    font-size: 11px;
    color: rgba(255, 255, 255, 0.7);
    font-weight: 500;
}

.upload-area {
    border: 2px dashed rgba(255, 255, 255, 0.3);
    border-radius: 12px;
    padding: 40px 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
    background: rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
}

.upload-area:hover {
    border-color: #06b6d4;
    background: rgba(6, 182, 212, 0.05);
}

.upload-area.dragover {
    border-color: #06b6d4;
    background: rgba(6, 182, 212, 0.1);
    transform: scale(1.02);
}

.upload-icon {
    font-size: 48px;
    margin-bottom: 15px;
    opacity: 0.7;
}

.upload-title {
    font-size: 16px;
    font-weight: 600;
    color: #fff;
    margin-bottom: 5px;
}

.upload-subtitle {
    font-size: 14px;
    color: rgba(255, 255, 255, 0.6);
}

.upload-preview {
    text-align: center;
    padding: 20px;
    background: rgba(0, 0, 0, 0.1);
    border-radius: 12px;
    margin-bottom: 20px;
}

.upload-preview img {
    max-width: 200px;
    max-height: 200px;
    border-radius: 8px;
    margin-bottom: 15px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
}

.upload-actions {
    display: flex;
    gap: 10px;
    justify-content: center;
}

.upload-tips {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
}

.tip-item {
    font-size: 12px;
    color: rgba(255, 255, 255, 0.6);
    margin-bottom: 5px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.tip-item:last-child {
    margin-bottom: 0;
}

/* –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ü–µ–ª–µ–π —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏ */
.goal-option-image {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: linear-gradient(135deg, #9333ea, #06b6d4);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    position: relative;
    overflow: hidden;
}

.goal-option-image.custom-image {
    background: none;
    padding: 0;
}

.goal-option-image.custom-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.goal-settings-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 24px;
    height: 24px;
    background: rgba(0, 0, 0, 0.6);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    color: white;
    transition: all 0.3s;
    opacity: 0;
}

.goal-option:hover .goal-settings-btn {
    opacity: 1;
}

.goal-settings-btn:hover {
    background: rgba(0, 0, 0, 0.8);
    border-color: #06b6d4;
}

/* –°–∫—Ä–æ–ª–ª–±–∞—Ä –¥–ª—è —Å–µ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
.default-images-grid::-webkit-scrollbar {
    width: 8px;
}

.default-images-grid::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
}

.default-images-grid::-webkit-scrollbar-thumb {
    background: rgba(6, 182, 212, 0.5);
    border-radius: 4px;
}

.default-images-grid::-webkit-scrollbar-thumb:hover {
    background: rgba(6, 182, 212, 0.7);
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (max-width: 768px) {
    .default-images-grid {
        grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
        gap: 8px;
    }
    
    .image-option {
        padding: 8px 4px;
    }
    
    .image-preview {
        font-size: 24px;
        margin-bottom: 4px;
    }
    
    .image-label {
        font-size: 10px;
    }
    
    .upload-area {
        padding: 30px 15px;
    }
    
    .upload-icon {
        font-size: 36px;
    }
    
    .upload-title {
        font-size: 14px;
    }
    
    .upload-subtitle {
        font-size: 12px;
    }
}
</style>

<script>
// –°–∏—Å—Ç–µ–º–∞ –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –¥–ª—è —Ü–µ–ª–µ–π
let selectedImage = null;
let currentGoalForImage = null;

// –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
function switchImageTab(tabName) {
    // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫
    document.querySelectorAll('.image-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    document.querySelectorAll('.image-tab-content').forEach(content => {
        content.classList.remove('active');
    });
    
    // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
    event.target.classList.add('active');
    document.getElementById(tabName + 'ImagesTab').classList.add('active');
    
    // –°–±—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä
    resetImageSelection();
}

// –í—ã–±–æ—Ä –≥–æ—Ç–æ–≤–æ–π –∏–∫–æ–Ω–∫–∏
function selectDefaultImage(icon) {
    // –£–±—Ä–∞—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏—Ö –æ–ø—Ü–∏–π
    document.querySelectorAll('.image-option').forEach(option => {
        option.classList.remove('selected');
    });
    
    // –í—ã–¥–µ–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –æ–ø—Ü–∏—é
    event.target.closest('.image-option').classList.add('selected');
    
    selectedImage = {
        type: 'emoji',
        value: icon
    };
    
    document.getElementById('confirmImageBtn').disabled = false;
}

// –û—Ç–∫—Ä—ã—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
function openImageSelector(goalElement) {
    currentGoalForImage = goalElement;
    document.getElementById('goalImageModal').classList.add('active');
    resetImageSelection();
}

// –°–±—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
function resetImageSelection() {
    selectedImage = null;
    document.getElementById('confirmImageBtn').disabled = true;
    
    // –£–±—Ä–∞—Ç—å –≤—ã–¥–µ–ª–µ–Ω–∏–µ
    document.querySelectorAll('.image-option').forEach(option => {
        option.classList.remove('selected');
    });
    
    // –°–∫—Ä—ã—Ç—å –ø—Ä–µ–≤—å—é –∑–∞–≥—Ä—É–∑–∫–∏
    document.getElementById('uploadPreview').style.display = 'none';
    document.getElementById('uploadArea').style.display = 'block';
}

// –ó–∞–∫—Ä—ã—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
function closeImageSelector() {
    document.getElementById('goalImageModal').classList.remove('active');
    resetImageSelection();
    currentGoalForImage = null;
}

// –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–±–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
function confirmImageSelection() {
    if (!selectedImage || !currentGoalForImage) return;
    
    const imageElement = currentGoalForImage.querySelector('.goal-option-image');
    
    if (selectedImage.type === 'emoji') {
        imageElement.textContent = selectedImage.value;
        imageElement.classList.remove('custom-image');
    } else if (selectedImage.type === 'upload') {
        imageElement.innerHTML = `<img src="${selectedImage.value}" alt="Custom goal image">`;
        imageElement.classList.add('custom-image');
    }
    
    closeImageSelector();
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤
document.addEventListener('DOMContentLoaded', function() {
    const uploadArea = document.getElementById('uploadArea');
    const fileInput = document.getElementById('imageUpload');
    const uploadPreview = document.getElementById('uploadPreview');
    const previewImage = document.getElementById('previewImage');
    
    // –ö–ª–∏–∫ –ø–æ –æ–±–ª–∞—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏
    uploadArea.addEventListener('click', () => {
        fileInput.click();
    });
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞
    fileInput.addEventListener('change', handleFileSelect);
    
    // Drag & Drop
    uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('dragover');
    });
    
    uploadArea.addEventListener('dragleave', () => {
        uploadArea.classList.remove('dragover');
    });
    
    uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            handleFile(files[0]);
        }
    });
});

function handleFileSelect(e) {
    const file = e.target.files[0];
    if (file) {
        handleFile(file);
    }
}

function handleFile(file) {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
    if (!file.type.startsWith('image/')) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
        return;
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (2MB)
    if (file.size > 2 * 1024 * 1024) {
        alert('–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 2 –ú–ë');
        return;
    }
    
    const reader = new FileReader();
    reader.onload = function(e) {
        previewImage.src = e.target.result;
        document.getElementById('uploadArea').style.display = 'none';
        uploadPreview.style.display = 'block';
        
        selectedImage = {
            type: 'upload',
            value: e.target.result
        };
        
        document.getElementById('confirmImageBtn').disabled = false;
    };
    reader.readAsDataURL(file);
}

function clearUpload() {
    document.getElementById('uploadArea').style.display = 'block';
    document.getElementById('uploadPreview').style.display = 'none';
    document.getElementById('imageUpload').value = '';
    resetImageSelection();
}

function confirmUpload() {
    if (selectedImage && selectedImage.type === 'upload') {
        document.getElementById('confirmImageBtn').disabled = false;
    }
}
</script>
